@using EPYSLSAILORAPP.Application.DTO.Tran_DesignMgt
@using EPYSLSAILORAPP.Domain.DTO;
@using EPYSLSAILORAPP.Domain.Entity;
@using EPYSLSAILORAPP.Domain.RPC;
@using Newtonsoft.Json;

@model EPYSLSAILORAPP.Domain.DTO.tran_draft_purchase_requisition_DTO;
@{
	ViewBag.Title = "Draft Requisition Edit";
	Layout = null;
}
<style>
	#toolbarId select {
		font-size: 11px !important;
	}

	.btninnerClose {
		color: #a52711;
		width: 26px;
		border: 1px solid #6f2d23;
		font-size: 22px;
		margin-top: 6px;
	}

	.dataTables_wrapper {
		margin-top: -40px;
	}

	.select_style {
		height: 37px;
	}

	.dataTable select {
		height: 25px !important;
		font-size: 10px !important;
	}

	.card-body {
		padding-bottom: 0px;
		padding-top: 0px;
		padding: 0rem 0rem;
	}

	.box {
		margin-bottom: 0.5rem;
	}

	.box-header {
		padding-top: 0.25rem;
		padding-bottom: 0.25rem;
		font-weight: 500;
		font-size: 12px;
	}

	.box-title {
		font-size: 12px;
		line-height: 1rem;
	}

	.table td, .table th {
		padding: 0rem !important;
		vertical-align: top !important;
	}
</style>



<form method="POST" id="frmEdit" class="my-login-validation" novalidate="" enctype="multipart/form-data" autocomplete="off">

	<input type="hidden" id="pr_id" value="@Model.dpr_id">
	<input type="hidden" id="event_id" value="@Model.event_id">
	<input type="hidden" id="item_structure_group_id" value="@Model.item_structure_group_id">





	<div class="row">
		<div class="col-md-6">
			<div class="box" style="margin-top:7px;">

				<div class="row">
					<div class="col-md-12">
						<div class="form-group">
							<label class="labelNormal " style="margin-bottom: 10px!important;font-weight:bold;">DPR No</label>
							<input style="width:100%" asp-for="dpr_no" type="text" readonly placeholder="Auto Generated" class="form-control border-#d1cccc-200 rounded-sm text-sm" />
							<input style="width:100%" asp-for="event_id" type="hidden" />
							<input style="width:100%" asp-for="item_structure_group_id" type="hidden" />
						</div>
					</div>

				</div>

				<div class="row">
					<div class="col-md-6">
						<div class="form-group">
							<label class="labelNormal " style="margin-bottom: 10px!important;font-weight:bold;">Delivery Date</label>
							<input style="width:100%" asp-for="delivery_date" type="date" class="form-control border-#d1cccc-200 rounded-sm text-sm" />
							<span asp-validation-for="delivery_date" class="text-danger"></span>
						</div>
					</div>
					<div class="col-md-6">
			
						<div class="form-group">
							<label class="labelNormal " style="margin-bottom: 10px!important;font-weight:bold;">DPR Date</label>
							<input style="width:100%" asp-for="dpr_date" type="date" class="form-control border-#d1cccc-200 rounded-sm text-sm" />
							<span asp-validation-for="dpr_date" class="text-danger"></span>
						</div>
					</div>
				</div>

				<div class="row">

					<div class="col-md-6">
						<div class="form-group">
							<label class="labelNormal " style="margin-bottom: 10px!important;font-weight:bold;">Techpack</label>

							<input style="width:100%" readonly asp-for="techpack_name" type="text" class="form-control border-#d1cccc-200 rounded-sm text-sm" />


						</div>
				
					</div>
					<div class="col-md-6">
						

						<div class="form-group">
							<label class="labelNormal " style="margin-bottom: 10px!important;font-weight:bold;">Delivery Unit</label>

							<input style="width:100%" asp-for="delivery_unit_name" type="text" class="form-control border-#d1cccc-200 rounded-sm text-sm" readonly />
							
							
						</div>
					</div>
				</div>

				<div class="row">

					<div class="col-md-6">
						<div class="form-group">
							<label class="labelNormal " style="margin-bottom: 10px!important;font-weight:bold;">Merchandiser</label>

							<input style="width:100%" readonly asp-for="merchandiser_name" type="text" class="form-control border-#d1cccc-200 rounded-sm text-sm" />
							<span asp-validation-for="merchandiser_id" class="text-danger"></span>

						</div>
					</div>
					<div class="col-md-6">


						<div class="form-group">

							<label class="labelNormal " style="margin-bottom: 10px!important;font-weight:bold;">Supplier</label>
							<input style="width:100%" asp-for="supplier_name" type="text" class="form-control border-#d1cccc-200 rounded-sm text-sm" readonly />
							


						</div>
					</div>
				</div>
				<div class="row">

				

					<div class="col-md-6">
						<div class="form-group">
							<label class="labelNormal " style="margin-bottom: 10px!important;font-weight:bold;">Supplier Address</label>
							<input style="width:100%" asp-for="supplier_address" type="text" class="form-control border-#d1cccc-200 rounded-sm text-sm" readonly />
							<span asp-validation-for="supplier_address" class="text-danger"></span>
						</div>
					</div>
					<div class="col-md-6">
						<div class="form-group">
							<label class="labelNormal " style="margin-bottom: 10px!important;font-weight:bold;">Supplier Concern Person</label>
							<input style="width:100%" asp-for="supplier_concern_person" type="text" class="form-control border-#d1cccc-200 rounded-sm text-sm" readonly />
							<span asp-validation-for="supplier_concern_person" class="text-danger"></span>
						</div>
					</div>

				</div>

				<div class="row">
					<div class="col-md-12">
						<div class="form-group">
							<label class="labelNormal " style="margin-bottom: 10px!important;font-weight:bold;">Remarks</label>
							<input style="width:100%" asp-for="remarks" type="text" class="form-control border-#d1cccc-200 rounded-sm text-sm" />
							<span asp-validation-for="remarks" class="text-danger"></span>
						</div>
					</div>

				</div>


			</div>
		</div>
		<div class="col-md-6" style="margin-top:37px;">


	


			<div class="row">
				<table class="table table-striped table-bordered table-hover">
					<thead class="table-dark">
						<tr>
							<th style="width:20%;text-align:center">#</th>
							<th style="width:60%;text-align:center">File</th>
							<th style="width:10%;text-align:center">Download</th>
							
						</tr>
					</thead>
					<tbody>
						@{
							int count = 1;
						}
						@foreach (var obj in Model.List_Files)
						{
							<tr>
								<th style="text-align:center">@count</th>
								<td>@obj.filename</td>
								<td style="text-align:center">
									<a href="#" class="btn btn-outline-success" onclick="downloadFile('@obj.filename', '@obj.base64string')"><i class="fa fa-download"></i></a>
									<a href="#" class="btn btn-outline-success" onclick="ViewPDF('@obj.base64string')"><i class="fa fa-file" aria-hidden="true"></i></a>

								</td>

							</tr>

							count++;
						}


					</tbody>
				</table>


			</div>





		</div>
	</div>




	<div class="row">
		<div class="col-md-12">
			<div class="box">

				<table style="font-size:10px;" id="DTTranFabricDetails" class=" table dataTable table-striped table-bordered" cellspacing="0">
					<thead>
						<tr>

							<th><label class="labelNormal">Item Code</label></th>
							<th><label class="labelNormal">Item Name</label></th>
							<th style="width:350px;"><label class="labelNormal">Item Spec</label></th>
							<th><label class="labelNormal">Quantity</label></th>
							<th><label class="labelNormal">UOM</label></th>
							

						</tr>
					</thead>
					<tbody>
						@{
							count = 1;
						}
						@foreach (var obj in Model.details)
						{
							<tr>

								<td style="display:none">@obj.pr_detail_id</td>
								<td><input disabled type='number' class='form-control item_id' value="@obj.item_id"></td>
								<td><input disabled type='text' class='form-control' value="@obj.item_name"></td>
								<td><input disabled type='text' class='form-control' value="@obj.item_spec"></td>
								<td><input disabled type='number' class='form-control quantity' value="@obj.item_quantity"></td>
								<td><input disabled type='text' class='form-control' value="@obj.uomText"></td>
								<td style="display:none"><input type='hidden' class='form-control uom' value="@obj.uom"></td>
						


							</tr>

							count++;
						}

					</tbody>
				</table>
			</div>
		</div>
	</div>


	
</form>


<script>
	
	function deleteFile(guid, row) {

		DeleteList.push(guid);
		row.closest('tr').remove();
	}

</script>